<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Kodular Bridge</title>
<script>

function send(msg){
  if(window.AppInventor){
    window.AppInventor.setWebViewString(msg);
  }
}

function checkMessage(){
  if(window.AppInventor){
    var msg = window.AppInventor.getWebViewString();
    if(msg && msg !== ""){
      handleMessage(msg);
      window.AppInventor.setWebViewString(""); // clear after reading
    }
  }
}

function handleMessage(msg){

  if(msg.startsWith("LOGIN|")){
    send("UID:12345");
  }

  if(msg.startsWith("WRITE|")){
    send("OK");
  }
}

// Check every 300ms
setInterval(checkMessage, 300);

</script>
</head>
<body>
</body>
</html>
